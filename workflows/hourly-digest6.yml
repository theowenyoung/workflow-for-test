on:
  rss:
    url:
      # HN posts with over 500 points
      - https://hnrss.org/newest?points=500
      # Show HN posts with over 100 points
      - https://hnrss.org/show?points=100
      #
      #
      #
      # Dev blog to an interesting upcoming german Minecraft server
      - https://blog.playlegend.net/rss
      # test
      - https://dev.to/feed/tag/javascript
    config:
      every: 15 * * * *
      skipSchedule: true
      filterOutputs:
        title: 1
        contentSnippet: 1
        link: 1
      format: 
        item.contentSnippet = item.contentSnippet.substr(0,50);
        return item;
jobs:
  notify:
    name: Send notifications
    runs-on: ubuntu-latest
    steps:
      - name: Send a telegram message
        uses: appleboy/telegram-action@v0.1.0
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          message: |
            定时推送6：

            *${{on.rss.outputs.title}}*
            
            ${{on.rss.outputs.contentSnippet}} ${{on.rss.outputs.link}}
          format: markdown
